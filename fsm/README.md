# 12.有限状态机

## 有限状态机

- 每个状态都是一个机器
	- 在每个机器里，我们可以做计算、存储、输出
	- 所有的机器接受的输入是一致的
	- 状态机的每个机器本身没有状态，如果我们用函数来表示，它应该是纯函数
- 每个机器都知道下一个状态
	- 每个机器都有确定的下一个状态（Moore）
	- 每个机器根据输入决定下一个状态(Mealy, 较强大)

## 问题

- 在一个字符串中，找到字符 a。
- 在一个字符串中，找到字符 ab。
- 在一个字符串中，找到字符 abc。
- 在一个字符串中，找到字符 abc...。

## JS中的有限状态机 (Mealy)

```js
// 每个函数是一个状态
function state(input){
	// 处理每个状态的逻辑
	return next; // 返回下一个状态(函数)
}

while(input){
	state = state(input) // 把状态机的返回值作为下一个状态
}
```

## 额外内容

- 状态机如何处理 `abcabx`?
- 状态机如何处理 `abababx`?
- 如何用状态机处理完全未知的 pattern ?
	- 参考：字符串 KMP 算法, 用状态机实现 KMP
	- match(str, pattern)